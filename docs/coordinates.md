# Координаты

## Формат хранения

Клетки поля хранятся разреженно в `Map<string, Player>` со строковым ключом:

```
"x:y"  // пример: "0:0", "-3:2"
```

Ключи формируются через `keyOf(x, y)` и читаются через `parseKey(key)`.

## Мировые координаты

Поле — бесконечная плоскость целочисленных клеток:

- Ось X: влево/вправо
- Ось Y: вверх/вниз (направление строк в UI)

Примеры:

- (0, 0) — стартовая точка отсчёта
- (1, 0) — на одну клетку вправо
- (-2, 3) — на две влево и три вниз

## Маппинг viewport

Размер viewport фиксирован: `GRID_SIZE × GRID_SIZE`.  
Камера хранит координаты центра `cameraX`, `cameraY` (float).

Левый верхний угол окна в мировых координатах:

```
startX = floor(cameraX - gridSize / 2)
startY = floor(cameraY - gridSize / 2)
```

Для каждой видимой клетки:

```
worldX = startX + col
worldY = startY + row
```

`worldX/worldY` используются для:
- чтения `Map` (`keyOf(worldX, worldY)`)
- создания ходов по клику

## Реплей

Реплей восстанавливает поле, последовательно проигрывая первые N ходов в новый `Map`.
Маппинг viewport остаётся таким же, как в режиме игры.
